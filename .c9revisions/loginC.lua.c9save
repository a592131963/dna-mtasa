{"ts":1350236425793,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"x,y = guiGetScreenSize()\r\n\r\nLoginWin = guiCreateWindow(x/2 - 150,y/2 - 110,300,220,\"Identify yourself\",false)\r\n\r\nTabPanel = guiCreateTabPanel(17,30,261,152,false,LoginWin)\r\n\r\nTabLogin = guiCreateTab(\"Login\",TabPanel)\r\nLblUsername = guiCreateLabel(11,27,70,16,\"Username\",false,TabLogin)\r\nLoginUsername = guiCreateEdit(76,26,171,21,\"\",false,TabLogin)\r\nLblPassword = guiCreateLabel(11,60,70,16,\"Password\",false,TabLogin)\r\nLoginPassword = guiCreateEdit(76,58,171,21,\"\",false,TabLogin)\r\nguiEditSetMasked(LoginPassword,true)\r\n\r\nTabRegister = guiCreateTab(\"Register\",TabPanel)\r\nLblRegisterUsername = guiCreateLabel(11,27,70,16,\"Username\",false,TabRegister)\r\nEditRegisterUsername = guiCreateEdit(76,26,171,21,\"\",false,TabRegister)\r\nLblRegisterPassword = guiCreateLabel(11,60,70,16,\"Password\",false,TabRegister)\r\nEditRegisterPassword = guiCreateEdit(76,58,171,21,\"\",false,TabRegister)\r\nguiEditSetMasked(EditRegisterPassword,true)\r\nLblRegisterEmail = guiCreateLabel(35,92,35,16,\"Email\",false,TabRegister)\r\nEditRegisterEmail = guiCreateEdit(76,90,171,21,\"\",false,TabRegister)\r\n\r\nBtnAction = guiCreateButton(182,188,95,19,\"Go\",false,LoginWin)\r\n\r\nguiSetVisible(LoginWin, false)\r\n\r\nlocal localPlayer = getLocalPlayer()\r\n\r\nfunction receiveVars( allow, email)\r\n\r\n\tlocal playername = getPlayerName(localPlayer)\r\n\t\r\n\tguiSetText(LoginUsername, \"\")\r\n\tguiSetText(EditRegisterUsername, \"\")\r\n\t\r\n\tif (email == \"false\") then\r\n\t\tguiSetVisible(LblRegisterEmail, false)\r\n\t\tguiSetVisible(EditRegisterEmail, false)\r\n\tend\r\n\t\r\n\tif (allow == \"false\") then\r\n\t\tguiDeleteTab(TabRegister, TabPanel)\r\n\tend\r\n\t\r\n\tguiSetSelectedTab(TabPanel, TabLogin)\r\n\tguiSetText(LoginUsername, playername)\r\n\tguiSetText(EditRegisterUsername, playername)\r\n\r\n\tguiSetVisible(LoginWin, true)\r\n\tguiBringToFront(LoginWin)\r\n\t\r\n\tguiSetInputEnabled(true)\r\n\tshowCursor(true)\r\nend\r\naddEvent( \"onSendVars\", true )\r\naddEventHandler( \"onSendVars\", getRootElement(), receiveVars )\r\n\r\nfunction windowHandler()\r\n\ttriggerServerEvent(\"onNeedVars\", getLocalPlayer())\r\nend\r\naddEventHandler(\"onClientResourceStart\", getResourceRootElement(getThisResource()), windowHandler)\r\n\r\nfunction onClickBtn(button, state)\r\n\tif(button == \"left\" and state == \"up\") then\r\n\t\tif(source == BtnAction) then\r\n\t\t\tif(guiGetSelectedTab(TabPanel) == TabLogin) then\r\n\t\t\t\ttriggerServerEvent(\"on4XLogin\", getRootElement(), localPlayer, guiGetText(LoginUsername), guiGetText(LoginPassword))\r\n\t\t\telse\r\n\t\t\t\ttriggerServerEvent(\"on4XRegister\", getRootElement(), localPlayer, guiGetText(EditRegisterUsername), guiGetText(EditRegisterPassword), guiGetText(EditRegisterEmail))\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\nend\r\naddEventHandler(\"onClientGUIClick\", BtnAction, onClickBtn, false)\r\n\r\nfunction hideLoginWindow()\r\n\tguiSetInputEnabled(false)\r\n\tguiSetVisible(LoginWin, false)\r\n\tshowCursor(false)\r\nend\r\naddEvent(\"hideLoginWindow\", true)\r\naddEventHandler(\"hideLoginWindow\", getRootElement(), hideLoginWindow)"]],"start1":0,"start2":0,"length1":0,"length2":2880}]],"length":2880}
