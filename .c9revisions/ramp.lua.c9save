{"ts":1350236405246,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"local gRoot = getRootElement()\r\nlocal g_Root = gRoot\r\nlocal gMe = getLocalPlayer()\r\nlocal gResourceRoot = getResourceRootElement(getThisResource())\r\nlocal theRamps = {}\r\n\r\naddEvent ( \"vehicleramps_SpawnRamp\", true )\r\naddEventHandler ( \"vehicleramps_SpawnRamp\", gRoot,\r\n\tfunction ( mode, returnedData )\r\n\t\t--outputChatBox ( \"A RAMP WAS MADE BY \" .. getPlayerName(source) )\r\n\t\t\r\n\t\tif ( theRamps[source] ) then\r\n\t\t\t--outputChatBox ( \"Destroying the ramps table\" )\r\n\t\t\tdestroyElement(theRamps[source])\r\n\t\t\ttheRamps[source] = false\r\n\t\tend\r\n\t\r\n\t\tlocal parentUnit = createElement(\"myRamps\" .. getPlayerID(source))\r\n\t\ttheRamps[source] = parentUnit\r\n\t\t\r\n\t\tif ( mode == \"1\" ) then\r\n\t\t\tif ( #returnedData == 6 ) then\r\n\t\t\t\tspawnRamp ( source, returnedData[1], returnedData[2], returnedData[3], returnedData[4], returnedData[5], returnedData[6], 1632  )\r\n\t\t\tend\r\n\t\telseif ( mode == \"1s\" ) then\r\n\t\t\tspawnRamp ( source, returnedData[1], returnedData[2], returnedData[3], 0, 0, 0, 1632  )\r\n\t\t\tspawnRamp ( source, returnedData[4], returnedData[5], returnedData[6], 0, 0, 90, 1632  )\r\n\t\t\tspawnRamp ( source, returnedData[7], returnedData[8], returnedData[9], 0, 0, 180, 1632  )\r\n\t\t\tspawnRamp ( source, returnedData[10], returnedData[11], returnedData[12], 0, 0, 270, 1632  )\r\n\t\telseif ( mode == \"2\" ) then\r\n\t\t\tif ( #returnedData == 9 ) then\r\n\t\t\t\tspawnRamp ( source, returnedData[1], returnedData[2], returnedData[3], returnedData[7], returnedData[8], returnedData[9], 1632 )\r\n\t\t\t\tspawnRamp ( source, returnedData[4], returnedData[5], returnedData[6], returnedData[7], returnedData[8], returnedData[9], 1632  )\r\n\t\t\tend\r\n\t\telseif ( mode == \"3\" ) then\r\n\t\t\tif ( #returnedData == 9 ) then\r\n\t\t\t\tlocal thisRamp = spawnRamp ( source, returnedData[1], returnedData[2], returnedData[3], returnedData[7], returnedData[8], returnedData[9], 1632 )\r\n\t\t\t\tlocal rx, ry, rz = getObjectRotation ( thisRamp )\r\n\t\t\t\tspawnRamp ( source, returnedData[4], returnedData[5], returnedData[6], rx + 22, returnedData[8], returnedData[9], 1632  )\r\n\t\t\tend\r\n\t\telseif ( mode == \"5\" ) then\r\n\t\t\tif ( #returnedData == 6 ) then\r\n\t\t\t\tspawnRamp ( source, returnedData[1], returnedData[2], returnedData[3], 0, 0, returnedData[6], 13592  )\r\n\t\t\tend\r\n\t\telseif ( mode == \"6\" ) then\r\n\t\t\tif ( #returnedData == 6 ) then\r\n\t\t\t\tspawnRamp ( source, returnedData[1], returnedData[2], returnedData[3], 0, 0, returnedData[6], 13641  )\r\n\t\t\tend\r\n\t\telseif ( mode == \"custom\" ) then\r\n\t\t\tif ( #returnedData == 7 ) then\r\n\t\t\t\tspawnRamp ( source, returnedData[1], returnedData[2], returnedData[3], 0, 0, returnedData[6], returnedData[7]  )\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n)\r\n\r\naddEventHandler ( \"onClientResourceStart\", gResourceRoot, function(name)\r\n\t--outputChatBox ( \"Client Script Started\" )\r\n\t\toutputChatBox ( \"Client Script Started\" )\r\n\t\tbindKey ( \"1\", \"down\", workOutRamps, 1 )\r\n\t\tbindKey ( \"2\", \"down\", workOutRamps, 2 )\r\n\t\tbindKey ( \"3\", \"down\", workOutRamps, 3 )\r\n\t\tbindKey ( \"5\", \"down\", workOutRamps, 5 )\r\n\t\tbindKey ( \"6\", \"down\", workOutRamps, 6 )\r\n\r\nend)\r\n\r\nfunction workOutRamps(mode)\r\n\tlocal playerVehicle = getPlayerOccupiedVehicle(getLocalPlayer())\r\n\tif ( playerVehicle ) then\r\n\t\tlocal PV = getVehicleController(playerVehicle)\r\n\t\tif ( PV ~= getLocalPlayer() ) then\r\n\t\t\toutputChatBox ( \"Your not the driver!\" )\r\n\t\t\treturn\r\n\t\tend \r\n\r\n\t\tif ( theRamps[gMe] ) then\r\n\t\t\t--outputChatBox ( \"Destroying the ramps table\" )\r\n\t\t\tdestroyElement(theRamps[gMe])\r\n\t\t\ttheRamps[gMe] = false\r\n\t\tend\r\n\t\r\n\t\tlocal parentUnit = createElement(\"myRamps\" .. getPlayerID(gMe))\r\n\t\ttheRamps[gMe] = parentUnit\r\n\t\t\t\r\n\t\tlocal distance = 20\r\n\t\tlocal returnedData = {}\r\n\t\tlocal vehX, vehY, vZ = getElementPosition(playerVehicle)\r\n\t\tlocal rotX, rotY, rotZ = getVehicleRotation(playerVehicle)\r\n\t\t\t\r\n\t\tif ( mode == \"1\" ) then\r\n\t\t\tif ( getKeyState(\"lshift\") ) then\r\n\t\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+130))\r\n\t\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\t\tlocal ramp2X, ramp2Y = ramp1X+5.5, ramp1Y --vehX + distance*math.cos(math.rad(rotZ+74.5)), vehY + distance*math.sin(math.rad(rotZ+90))\r\n\t\t\t\tlocal ramp2Z = ramp1Z --getGroundForCoords(ramp2X, ramp2Y, vZ)\r\n\t\t\t\tlocal ramp3X, ramp3Y = ramp1X, ramp1Y+5.5 --vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+90)) + 5.5\r\n\t\t\t\tlocal ramp3Z = ramp1Z --getGroundForCoords(ramp3X, ramp3Y, vZ)\r\n\t\t\t\tlocal ramp4X, ramp4Y = ramp1X-5.5, ramp1Y --vehX + distance*math.cos(math.rad(rotZ+90)) - 5.5, vehY + distance*math.sin(math.rad(rotZ+90))\r\n\t\t\t\tlocal ramp4Z = ramp1Z --getGroundForCoords(ramp4X, ramp4Y, vZ)\r\n\t\t\t\tramp1Y = ramp1Y - 5.5\r\n\t\t\t\t\r\n\t\t\t\treturnedData[1] = ramp1X\r\n\t\t\t\treturnedData[2] = ramp1Y\r\n\t\t\t\treturnedData[3] = ramp1Z + 1\r\n\t\t\t\treturnedData[4] = ramp2X\r\n\t\t\t\treturnedData[5] = ramp2Y\r\n\t\t\t\treturnedData[6] = ramp2Z + 1\r\n\t\t\t\treturnedData[7] = ramp3X\r\n\t\t\t\treturnedData[8] = ramp3Y\r\n\t\t\t\treturnedData[9] = ramp3Z + 1\r\n\t\t\t\treturnedData[10] = ramp4X\r\n\t\t\t\treturnedData[11] = ramp4Y\r\n\t\t\t\treturnedData[12] = ramp4Z + 1\r\n\t\t\t\t\r\n\t\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], 0, 0, 0, 1632  )\r\n\t\t\t\tspawnRamp ( gMe, returnedData[4], returnedData[5], returnedData[6], 0, 0, 90, 1632  )\r\n\t\t\t\tspawnRamp ( gMe, returnedData[7], returnedData[8], returnedData[9], 0, 0, 180, 1632  )\r\n\t\t\t\tspawnRamp ( gMe, returnedData[10], returnedData[11], returnedData[12], 0, 0, 270, 1632  )\r\n\t\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode .. \"s\", returnedData )\r\n\t\t\t\tsetElementPosition ( playerVehicle, ramp1X, ramp1Y, ramp1Z+3 )\r\n\t\t\t\tsetVehicleRotation ( playerVehicle, 0, 0, 0 )\r\n\t\t\t\tsetElementVelocity ( playerVehicle, 0, 0, 0 )\r\n\t\t\t\tsetElementVelocity ( playerVehicle, 0, 0, 0 )\r\n\t\t\telse\r\n\t\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+90))\r\n\t\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\t\t\r\n\t\t\t\tif ( doneOnce ) then\r\n\t\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tdoneOnce = false\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = true\r\n\t\t\t\tend\r\n\t\t\t\tlastx = ramp1X\r\n\t\t\t\tlasty = ramp1Y\r\n\t\t\t\t\r\n\t\t\t\treturnedData[1] = ramp1X\r\n\t\t\t\treturnedData[2] = ramp1Y\r\n\t\t\t\treturnedData[3] = ramp1Z + 1\r\n\t\t\t\treturnedData[4] = rotX\r\n\t\t\t\treturnedData[5] = rotY\r\n\t\t\t\treturnedData[6] = rotZ\r\n\t\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], returnedData[4], returnedData[5], returnedData[6], 1632  )\r\n\t\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\t\tend\r\n\t\telseif ( mode == \"2\" ) then\r\n\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+83)), vehY + distance*math.sin(math.rad(rotZ+83))\r\n\t\t\tlocal ramp2X, ramp2Y = vehX + distance*math.cos(math.rad(rotZ+95)), vehY + distance*math.sin(math.rad(rotZ+95))\r\n\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\tlocal ramp2Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\t\r\n\t\t\tif ( doneOnce ) then\r\n\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = false\r\n\t\t\t\tend\r\n\t\t\telse\r\n\t\t\t\tdoneOnce = true\r\n\t\t\tend\r\n\t\t\tlastx = ramp1X\r\n\t\t\tlasty = ramp1Y\r\n\t\t\t\r\n\t\t\treturnedData[1] = ramp1X\r\n\t\t\treturnedData[2] = ramp1Y\r\n\t\t\treturnedData[3] = ramp1Z + 1\r\n\t\t\treturnedData[4] = ramp2X\r\n\t\t\treturnedData[5] = ramp2Y\r\n\t\t\treturnedData[6] = ramp2Z + 1\r\n\t\t\treturnedData[7] = rotX\r\n\t\t\treturnedData[8] = rotY\r\n\t\t\treturnedData[9] = rotZ\r\n\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], returnedData[7], returnedData[8], returnedData[9], 1632 )\r\n\t\t\tspawnRamp ( gMe, returnedData[4], returnedData[5], returnedData[6], returnedData[7], returnedData[8], returnedData[9], 1632  )\r\n\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\telseif ( mode == \"3\" ) then\r\n\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+90))\r\n\t\t\tlocal ramp2X, ramp2Y = vehX + (distance+5)*math.cos(math.rad(rotZ+90)), vehY + (distance+5)*math.sin(math.rad(rotZ+90))\r\n\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\tlocal ramp2Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\t\r\n\t\t\tif ( doneOnce ) then\r\n\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = false\r\n\t\t\t\tend\r\n\t\t\telse\r\n\t\t\t\tdoneOnce = true\r\n\t\t\tend\r\n\t\t\tlastx = ramp1X\r\n\t\t\tlasty = ramp1Y\r\n\t\t\t\r\n\t\t\treturnedData[1] = ramp1X\r\n\t\t\treturnedData[2] = ramp1Y\r\n\t\t\treturnedData[3] = ramp1Z + 1\r\n\t\t\treturnedData[4] = ramp2X\r\n\t\t\treturnedData[5] = ramp2Y\r\n\t\t\treturnedData[6] = ramp2Z + 4.5\r\n\t\t\treturnedData[7] = rotX\r\n\t\t\treturnedData[8] = rotY\r\n\t\t\treturnedData[9] = rotZ\r\n\t\t\tlocal thisRamp = spawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], returnedData[7], returnedData[8], returnedData[9], 1632 )\r\n\t\t\tlocal rx, ry, rz = getObjectRotation ( thisRamp )\r\n\t\t\tspawnRamp ( gMe, returnedData[4], returnedData[5], returnedData[6], rx + 22, returnedData[8], returnedData[9], 1632  )\r\n\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\telseif ( mode == \"5\" ) then\r\n\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+115))\r\n\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\tif ( doneOnce ) then\r\n\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = false\r\n\t\t\t\tend\r\n\t\t\telse\r\n\t\t\t\tdoneOnce = true\r\n\t\t\tend\r\n\t\t\tlastx = ramp1X\r\n\t\t\tlasty = ramp1Y\r\n\t\t\t\r\n\t\t\treturnedData[1] = ramp1X\r\n\t\t\treturnedData[2] = ramp1Y\r\n\t\t\treturnedData[3] = ramp1Z + 9\r\n\t\t\treturnedData[4] = rotX\r\n\t\t\treturnedData[5] = rotY\r\n\t\t\treturnedData[6] = rotZ - 90\r\n\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], 0, 0, returnedData[6], 13592  )\r\n\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\telseif ( mode == \"6\" ) then\r\n\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+90))\r\n\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\tif ( doneOnce ) then\r\n\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = false\r\n\t\t\t\tend\r\n\t\t\telse\r\n\t\t\t\tdoneOnce = true\r\n\t\t\tend\r\n\t\t\tlastx = ramp1X\r\n\t\t\tlasty = ramp1Y\r\n\t\t\t\r\n\t\t\treturnedData[1] = ramp1X\r\n\t\t\treturnedData[2] = ramp1Y\r\n\t\t\treturnedData[3] = ramp1Z +1\r\n\t\t\treturnedData[4] = rotX\r\n\t\t\treturnedData[5] = rotY\r\n\t\t\treturnedData[6] = rotZ + 90\r\n\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], 0, 0, returnedData[6], 13641  )\r\n\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\telseif ( mode == \"custom\" ) then\r\n\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+90))\r\n\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\t\r\n\t\t\tif ( doneOnce ) then\r\n\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = false\r\n\t\t\t\tend\r\n\t\t\telse\r\n\t\t\t\tdoneOnce = true\r\n\t\t\tend\r\n\t\t\tlastx = ramp1X\r\n\t\t\tlasty = ramp1Y\r\n\t\t\t\r\n\t\t\treturnedData[1] = ramp1X\r\n\t\t\treturnedData[2] = ramp1Y\r\n\t\t\treturnedData[3] = ramp1Z + 1 + zOffset\r\n\t\t\treturnedData[4] = rotX\r\n\t\t\treturnedData[5] = rotY\r\n\t\t\treturnedData[6] = rotZ\r\n\t\t\treturnedData[7] = modelID\r\n\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], 0, 0, returnedData[6], returnedData[7]  )\r\n\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\tend\r\n\tend\r\nend\r\n\r\nfunction spawnRamp ( player, x, y, z, rx, ry, rz, model )\r\n\t--outputDebugString ( \"Attempting to create a ramp @ \" .. tostring(x) .. \" \" .. tostring(y) .. \" \" .. tostring(z) .. \" r @ \" .. tostring(rx) .. \" \" .. tostring(ry) .. \" \" .. tostring(rz) )\r\n\tlocal dontCreateRamp = checkRampForObstructions(x, y, z)\r\n\t--outputChatBox ( \"Ramps Table = \" .. tostring(theRamps[player]) )\r\n\tif ( theRamps[player] ) then\r\n\t\tparentUnit = theRamps[player]\r\n\tend\r\n\tif ( dontCreateRamp == false ) then\r\n\t\tlocal thisRamp = createObject ( model, x, y, z, rx, 0, rz )\r\n\t\tsetElementParent ( thisRamp, parentUnit )\r\n\t\treturn thisRamp\r\n\tend\r\nend\r\n\r\naddEventHandler ( \"onClientVehicleExit\", g_Root,\r\n\tfunction ( player, seat )\r\n\t\tif ( theRamps[player] ) then\r\n\t\t\tdestroyElement ( theRamps[player] )\r\n\t\tend\r\n\tend\r\n)\r\n\r\naddEventHandler ( \"onClientPlayerQuit\", g_Root,\r\n\tfunction ( reason )\r\n\t\tif ( theRamps[source] ) then\r\n\t\t\tdestroyElement ( theRamps[source] )\r\n\t\tend\r\n\tend\r\n)\r\n\r\nfunction getPlayerID (player)\r\n\tfor k,v in ipairs(getElementsByType(\"player\")) do\r\n\t\tif ( v == player ) then\r\n\t\t\treturn k\r\n\t\tend\r\n\tend\r\n\treturn 0\r\nend\r\n\r\nfunction getGroundForCoords(x, y, z)\r\n\tlocal col, retx, rety, retz, element = processLineOfSight ( x, y, z, x, y, z-500 )\r\n\tif ( col ) then\r\n\t\tlocal watrPos = getWaterLevel ( x, y, z )\r\n\t\tif ( watrPos ~= false ) then\r\n\t\t\tif ( tonumber(watrPos) > tonumber(retz) ) then\r\n\t\t\t\treturn watrPos + 0.1\r\n\t\t\telse\r\n\t\t\t\treturn retz\r\n\t\t\tend\r\n\t\telse\r\n\t\t\treturn retz\r\n\t\tend\r\n\telse\r\n\t\tlocal watrPos = getWaterLevel ( x, y, z )\r\n\t\tif ( watrPos ~= false ) then\r\n\t\t\treturn watrPos + 0.1\r\n\t\telse\r\n\t\t\treturn z\r\n\t\tend\r\n\tend\r\nend\r\n\r\nfunction checkRampForObstructions ( x, y, z )\r\n\tlocal dontCreate = false\r\n\tfor k,v in ipairs(getElementsByType(\"player\")) do\r\n\t\tif ( v ~= getLocalPlayer() ) then\r\n\t\t\tlocal thisX, thisY, thisZ = getElementPosition(v)\r\n\t\t\tlocal thisDistance = getDistanceBetweenPoints3D ( x, y, z, thisX, thisY, thisZ )\r\n\t\t\tif ( thisDistance < 8 ) then\r\n\t\t\t\tdontCreate = true\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n\treturn dontCreate\r\nend"]],"start1":0,"start2":0,"length1":0,"length2":13817}]],"length":13817}
{"contributors":[],"silentsave":false,"ts":1305926263613,"patch":[[{"diffs":[[0,"arted\" )\r\n\t\t"],[1,"--"],[0,"bindKey ( \"1"]],"start1":2742,"start2":2742,"length1":24,"length2":26},{"diffs":[[0,"mps, 1 )\r\n\t\t"],[1,"--"],[0,"bindKey ( \"2"]],"start1":2788,"start2":2788,"length1":24,"length2":26},{"diffs":[[0,"mps, 3 )\r\n\t\t"],[1,"--"],[0,"bindKey ( \"5"]],"start1":2878,"start2":2878,"length1":24,"length2":26},{"diffs":[[0,"mps, 5 )\r\n\t\t"],[1,"--"],[0,"bindKey ( \"6"]],"start1":2924,"start2":2924,"length1":24,"length2":26}]],"length":13825,"saved":false}
{"ts":1305926372655,"patch":[[{"diffs":[[0,"amps"],[-1,", 3"],[0,""],[1,""],[0," )\r\n"]],"start1":2877,"start2":2877,"length1":11,"length2":8},{"diffs":[[0,"utRamps("],[-1,"mode"],[0,""],[1,""],[0,")\r\n\tloca"]],"start1":3001,"start2":3001,"length1":20,"length2":16},{"diffs":[[0,")\r\n\t"],[-1,"\t\t\r\n\t\tif ( mode == \"1\" ) then\r\n\t\t\tif ( getKeyState(\"lshift\") ) then\r\n\t\t"],[1,"\r\n"],[0,"\t\tlo"]],"start1":3684,"start2":3684,"length1":79,"length2":10},{"diffs":[[0,"hY +"],[-1," distance*math.sin(math.rad(rotZ+130))\r\n\t\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\t\tlocal ramp2X, ramp2Y = ramp1X+5.5, ramp1Y --vehX + distance*math.cos(math.rad(rotZ+74.5)), vehY +"],[0," dis"]],"start1":3762,"start2":3762,"length1":208,"length2":8},{"diffs":[[0,".rad(rotZ+90))\r\n"],[-1,"\t\t"],[0,"\t\tlocal ramp2Z ="]],"start1":3789,"start2":3789,"length1":34,"length2":32},{"diffs":[[0,"amp2"],[-1,"Z = ramp1Z --getGroundForCoords(ramp2X, ramp2Y, vZ)\r\n\t\t\t\tlocal ramp3X, ramp3Y = ramp1X, ramp1Y+5.5 --vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+90)) + 5.5\r\n\t\t\t\tlocal ramp3Z = ramp1Z --getGroundForCoords(ramp3X, ramp3Y, vZ)\r\n\t\t\t\tlocal ramp4X, ramp4Y = ramp1X-5.5, ramp1Y --vehX + distance"],[1,"X, ramp2Y = vehX + (distance+5)"],[0,"*mat"]],"start1":3814,"start2":3814,"length1":336,"length2":39},{"diffs":[[0,"otZ+90))"],[-1," - 5.5"],[0,", vehY +"]],"start1":3869,"start2":3869,"length1":22,"length2":16},{"diffs":[[0,"Y + "],[-1,"distance*math.sin(math.rad(rotZ+90))\r\n\t\t\t\tlocal ramp4Z = ramp1Z --getGroundForCoords(ramp4X, ramp4Y, vZ)\r\n\t\t\t\tramp1Y = ramp1Y - 5.5\r\n\t\t\t\t\r\n\t\t\t\treturnedData[1] = ramp1X\r\n\t\t\t\treturnedData[2] = ramp1Y\r\n\t\t\t\treturnedData[3] = ramp1Z + 1\r\n\t\t\t\treturnedData[4] = ramp2X\r\n\t\t\t\treturnedData[5] = ramp2Y\r\n\t\t\t\treturnedData[6] = ramp2Z + 1\r\n\t\t\t\treturnedData[7] = ramp3X\r\n\t\t\t\treturnedData[8] = ramp3Y\r\n\t\t\t\treturnedData[9] = ramp3Z + 1\r\n\t\t\t\treturnedData[10] = ramp4X\r\n\t\t\t\treturnedData[11] = ramp4Y\r\n\t\t\t\treturnedData[12] = ramp4Z + 1\r\n\t\t\t\t\r\n\t\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], 0, 0, 0, 1632  )\r\n\t\t\t\tspawnRamp ( gMe, returnedData[4], returnedData[5], returnedData[6], 0, 0, 90, 1632  )\r\n\t\t\t\tspawnRamp ( gMe, returnedData[7], returnedData[8], returnedData[9], 0, 0, 180, 1632  )\r\n\t\t\t\tspawnRamp ( gMe, returnedData[10], returnedData[11], returnedData[12], 0, 0, 270, 1632  )\r\n\t\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode .. \"s\", returnedData )\r\n\t\t\t\tsetElementPosition ( playerVehicle, ramp1X, ramp1Y, ramp1Z+3 )\r\n\t\t\t\tsetVehicleRotation ( playerVehicle, 0, 0, 0 )\r\n\t\t\t\tsetElementVelocity ( playerVehicle, 0, 0, 0 )\r\n\t\t\t\tsetElementVelocity ( playerVehicle, 0, 0, 0 )\r\n\t\t\telse\r\n\t\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+90))\r\n\t\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\t\t\r\n\t\t\t\tif ( doneOnce ) then\r\n\t\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tdoneOnce = false\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = true\r\n\t\t\t\tend\r\n\t\t\t\tlastx = ramp1X\r\n\t\t\t\tlasty = ramp1Y\r\n\t\t\t\t\r\n\t\t\t\treturnedData[1] = ramp1X\r\n\t\t\t\treturnedData[2] = ramp1Y\r\n\t\t\t\treturnedData[3] = ramp1Z + 1\r\n\t\t\t\treturnedData[4] = rotX\r\n\t\t\t\treturnedData[5] = rotY\r\n\t\t\t\treturnedData[6] = rotZ\r\n\t\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], returnedData[4], returnedData[5], returnedData[6], 1632  )\r\n\t\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\t\tend\r\n\t\telseif ( mode == \"2\" ) then\r\n\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+83)), vehY + distance*math.sin(math.rad(rotZ+83))\r\n\t\t\tlocal ramp2X, ramp2Y = vehX + distance*math.cos(math.rad(rotZ+95)), vehY + distance*math.sin(math.rad(rotZ+95))\r\n\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\tlocal ramp2Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\t\r\n\t\t\tif ( doneOnce ) then\r\n\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = false\r\n\t\t\t\tend\r\n\t\t\telse\r\n\t\t\t\tdoneOnce = true\r\n\t\t\tend\r\n\t\t\tlastx = ramp1X\r\n\t\t\tlasty = ramp1Y\r\n\t\t\t\r\n\t\t\treturnedData[1] = ramp1X\r\n\t\t\treturnedData[2] = ramp1Y\r\n\t\t\treturnedData[3] = ramp1Z + 1\r\n\t\t\treturnedData[4] = ramp2X\r\n\t\t\treturnedData[5] = ramp2Y\r\n\t\t\treturnedData[6] = ramp2Z + 1\r\n\t\t\treturnedData[7] = rotX\r\n\t\t\treturnedData[8] = rotY\r\n\t\t\treturnedData[9] = rotZ\r\n\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], returnedData[7], returnedData[8], returnedData[9], 1632 )\r\n\t\t\tspawnRamp ( gMe, returnedData[4], returnedData[5], returnedData[6], returnedData[7], returnedData[8], returnedData[9], 1632  )\r\n\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\telseif ( mode == \"3\" ) then\r\n\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+90))\r\n\t\t\tlocal ramp2X, ramp2Y = vehX + (distance+5)*math.cos(math.rad(rotZ+90)), vehY + (distance+5)*math.sin(math.rad(rotZ+90))\r\n\t"],[1,"(distance+5)*math.sin(math.rad(rotZ+90))\r\n"],[0,"\t\tlo"]],"start1":3882,"start2":3882,"length1":3655,"length2":50},{"diffs":[[0,"Y, vZ)\r\n"],[-1,"\t"],[0,"\t\tlocal "]],"start1":3977,"start2":3977,"length1":17,"length2":16},{"diffs":[[0," ramp1Y, vZ)\r\n\t\t"],[-1,"\t"],[0,"\r\n"],[-1,"\t"],[0,"\t\tif ( doneOnce "]],"start1":4028,"start2":4028,"length1":36,"length2":34},{"diffs":[[0,"oneOnce ) then\r\n"],[-1,"\t"],[0,"\t\t\tif ( lastx =="]],"start1":4054,"start2":4054,"length1":33,"length2":32},{"diffs":[[0," ramp1X ) then\r\n"],[-1,"\t"],[0,"\t\t\t\tif ( lasty ="]],"start1":4086,"start2":4086,"length1":33,"length2":32},{"diffs":[[0,"1Y ) then\r\n\t\t\t\t\t"],[-1,"\t"],[0,"ramp1Z = ramp1Z "]],"start1":4124,"start2":4124,"length1":33,"length2":32},{"diffs":[[0,"8579690039\r\n\t\t\t\t"],[-1,"\t"],[0,"end\r\n"],[-1,"\t"],[0,"\t\t\telse\r\n\t\t\t\t\tdo"]],"start1":4161,"start2":4161,"length1":39,"length2":37},{"diffs":[[0,"d\r\n\t\t\telse\r\n\t\t\t\t"],[-1,"\t"],[0,"doneOnce = false"]],"start1":4179,"start2":4179,"length1":33,"length2":32},{"diffs":[[0,"nce = false\r\n\t\t\t"],[-1,"\t"],[0,"end\r\n"],[-1,"\t"],[0,"\t\telse\r\n\t\t\t\tdone"]],"start1":4200,"start2":4200,"length1":39,"length2":37},{"diffs":[[0,"end\r\n\t\telse\r\n\t\t\t"],[-1,"\t"],[0,"doneOnce = true\r"]],"start1":4216,"start2":4216,"length1":33,"length2":32},{"diffs":[[0,"eOnce = true\r\n\t\t"],[-1,"\t"],[0,"end\r\n"],[-1,"\t"],[0,"\t\tlastx = ramp1X"]],"start1":4235,"start2":4235,"length1":39,"length2":37},{"diffs":[[0,"stx = ramp1X\r\n\t\t"],[-1,"\t"],[0,"lasty = ramp1Y\r\n"]],"start1":4260,"start2":4260,"length1":33,"length2":32},{"diffs":[[0,"sty = ramp1Y\r\n\t\t"],[-1,"\t"],[0,"\r\n"],[-1,"\t"],[0,"\t\treturnedData[1"]],"start1":4278,"start2":4278,"length1":36,"length2":34},{"diffs":[[0,"ta[1] = ramp1X\r\n"],[-1,"\t"],[0,"\t\treturnedData[2"]],"start1":4308,"start2":4308,"length1":33,"length2":32},{"diffs":[[0,"[2] = ramp1Y\r\n\t\t"],[-1,"\t"],[0,"returnedData[3] "]],"start1":4338,"start2":4338,"length1":33,"length2":32},{"diffs":[[0,"mp1Z + 1\r\n\t\t"],[-1,"\t"],[0,"returnedData"]],"start1":4374,"start2":4374,"length1":25,"length2":24},{"diffs":[[0,"ramp2X\r\n"],[-1,"\t"],[0,"\t\treturn"]],"start1":4404,"start2":4404,"length1":17,"length2":16},{"diffs":[[0,"= ramp2Y\r\n\t\t"],[-1,"\t"],[0,"returnedData"]],"start1":4430,"start2":4430,"length1":25,"length2":24},{"diffs":[[0,"2Z + 4.5\r\n\t\t"],[-1,"\t"],[0,"returnedData"]],"start1":4464,"start2":4464,"length1":25,"length2":24},{"diffs":[[0,"Data[7] = rotX\r\n"],[-1,"\t"],[0,"\t\treturnedData[8"]],"start1":4484,"start2":4484,"length1":33,"length2":32},{"diffs":[[0,"ta[8] = rotY\r\n\t\t"],[-1,"\t"],[0,"returnedData[9] "]],"start1":4512,"start2":4512,"length1":33,"length2":32},{"diffs":[[0,"= rotZ\r\n"],[-1,"\t"],[0,"\t\tlocal "]],"start1":4544,"start2":4544,"length1":17,"length2":16},{"diffs":[[0,"1632 )\r\n"],[-1,"\t"],[0,"\t\tlocal "]],"start1":4690,"start2":4690,"length1":17,"length2":16},{"diffs":[[0,"isRamp )\r\n\t\t"],[-1,"\t"],[0,"spawnRamp ( "]],"start1":4741,"start2":4741,"length1":25,"length2":24},{"diffs":[[0,"[9], 1632  )\r\n\t\t"],[-1,"\t"],[0,"triggerServerEve"]],"start1":4859,"start2":4859,"length1":33,"length2":32},{"diffs":[[0," )\r\n"],[-1,"\t\telseif ( mode == \"5\" ) then\r\n\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+115))\r\n\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\tif ( doneOnce ) then\r\n\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = false\r\n\t\t\t\tend\r\n\t\t\telse\r\n\t\t\t\tdoneOnce = true\r\n\t\t\tend\r\n\t\t\tlastx = ramp1X\r\n\t\t\tlasty = ramp1Y\r\n\t\t\t\r\n\t\t\treturnedData[1] = ramp1X\r\n\t\t\treturnedData[2] = ramp1Y\r\n\t\t\treturnedData[3] = ramp1Z + 9\r\n\t\t\treturnedData[4] = rotX\r\n\t\t\treturnedData[5] = rotY\r\n\t\t\treturnedData[6] = rotZ - 90\r\n\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], 0, 0, returnedData[6], 13592  )\r\n\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\telseif ( mode == \"6\" ) then\r\n\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+90))\r\n\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\tif ( doneOnce ) then\r\n\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = false\r\n\t\t\t\tend\r\n\t\t\telse\r\n\t\t\t\tdoneOnce = true\r\n\t\t\tend\r\n\t\t\tlastx = ramp1X\r\n\t\t\tlasty = ramp1Y\r\n\t\t\t\r\n\t\t\treturnedData[1] = ramp1X\r\n\t\t\treturnedData[2] = ramp1Y\r\n\t\t\treturnedData[3] = ramp1Z +1\r\n\t\t\treturnedData[4] = rotX\r\n\t\t\treturnedData[5] = rotY\r\n\t\t\treturnedData[6] = rotZ + 90\r\n\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], 0, 0, returnedData[6], 13641  )\r\n\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\telseif ( mode == \"custom\" ) then\r\n\t\t\tlocal ramp1X, ramp1Y = vehX + distance*math.cos(math.rad(rotZ+90)), vehY + distance*math.sin(math.rad(rotZ+90))\r\n\t\t\tlocal ramp1Z = getGroundForCoords(ramp1X, ramp1Y, vZ)\r\n\t\t\t\r\n\t\t\tif ( doneOnce ) then\r\n\t\t\t\tif ( lastx == ramp1X ) then\r\n\t\t\t\t\tif ( lasty == ramp1Y ) then\r\n\t\t\t\t\t\tramp1Z = ramp1Z - 0.78579690039\r\n\t\t\t\t\tend\r\n\t\t\t\telse\r\n\t\t\t\t\tdoneOnce = false\r\n\t\t\t\tend\r\n\t\t\telse\r\n\t\t\t\tdoneOnce = true\r\n\t\t\tend\r\n\t\t\tlastx = ramp1X\r\n\t\t\tlasty = ramp1Y\r\n\t\t\t\r\n\t\t\treturnedData[1] = ramp1X\r\n\t\t\treturnedData[2] = ramp1Y\r\n\t\t\treturnedData[3] = ramp1Z + 1 + zOffset\r\n\t\t\treturnedData[4] = rotX\r\n\t\t\treturnedData[5] = rotY\r\n\t\t\treturnedData[6] = rotZ\r\n\t\t\treturnedData[7] = modelID\r\n\t\t\tspawnRamp ( gMe, returnedData[1], returnedData[2], returnedData[3], 0, 0, returnedData[6], returnedData[7]  )\r\n\t\t\ttriggerServerEvent ( \"vehicleramps_PlayerSpawnedRamp\", getLocalPlayer(), mode, returnedData )\r\n\t\tend\r\n"],[0,"\tend"]],"start1":4966,"start2":4966,"length1":2614,"length2":8}]],"length":7004,"saved":false}
