{"ts":1350236444545,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"function on4XLogin ( player, user, pass )\r\n\tlocal account = getAccount ( user, pass )\r\n\tif ( account ~= false ) then\r\n\t\tif ( not isGuestAccount ( account ) ) then -- For every player that's logged in....\r\n\t\t\tlogOut ( player ) -- Log them out.\r\n\t\tend\r\n\t\t\r\n\t\tif (logIn ( player, account, pass ) == true) then\r\n\t\t\ttriggerClientEvent ( player, \"hideLoginWindow\", getRootElement())\r\n\t\telse\r\n\t\t\toutputChatBox ( \"Login error!\", player, 255, 255, 0 ) -- Output they got the details wrong.\r\n\t\tend\r\n\telse\r\n\t\toutputChatBox ( \"Wrong username or password!\", player, 255, 255, 0 ) -- Output they got the details wrong.\r\n\tend\r\nend\r\naddEvent( \"on4XLogin\", true )\r\naddEventHandler( \"on4XLogin\", getRootElement(), on4XLogin )\r\n\r\nfunction on4XRegister ( player, user, pass, email )\r\n\tlocal account = getAccount ( user, pass )\r\n\tif ( account ~= false ) then\r\n\t\tif (logIn ( player, account, pass ) == true) then\r\n\t\t\ttriggerClientEvent ( player, \"hideLoginWindow\", getRootElement())\r\n\t\telse\r\n\t\t\toutputChatBox ( \"Login error!\", player, 255, 255, 0 ) -- Output they got the details wrong.\r\n\t\tend\r\n\telse\r\n\t\taccount = addAccount ( user, pass )\r\n\t\tsetAccountData ( account, \"email\", email)\r\n\t\tif (logIn ( player, account, pass ) == true) then\r\n\t\t\ttriggerClientEvent ( player, \"hideLoginWindow\", getRootElement())\r\n\t\telse\r\n\t\t\toutputChatBox ( \"Register/Login error!\", player, 255, 255, 0 ) -- Output they got the details wrong.\r\n\t\tend\r\n\tend\r\nend\r\naddEvent( \"on4XRegister\", true )\r\naddEventHandler( \"on4XRegister\", getRootElement(), on4XRegister )\r\n\r\nfunction needVars()\r\n\tlocal allow_register = get(\"allow_register\")\r\n\tlocal email_on_register = get(\"email_on_register\")\r\n\ttriggerClientEvent(source, \"onSendVars\", getRootElement(), allow_register, email_on_register)\r\nend\r\naddEvent(\"onNeedVars\", true)\r\naddEventHandler(\"onNeedVars\", getRootElement(), needVars)"]],"start1":0,"start2":0,"length1":0,"length2":1830}]],"length":1830}
